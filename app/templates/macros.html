{% macro render_field(field) %}
  <div class="form_field">
  {% if 'hidden' not in kwargs.get('class', '') %}
      {{ field.label(class="label") }}
  {% endif %}
  {% if field.errors %}
      {% set css_class = 'has_error ' + kwargs.pop('class', '') %}
      <ul class="errors">{% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}</ul>
      {{ field(class=css_class, **kwargs) }}
  {% else %}
      {{ field(**kwargs) }}
  {% endif %}
  </div>
{% endmacro %}
